import { CodeBlock } from '@/components/code-block/code-block.kita';
import { DocsLayout } from '@/layouts/docs-layout';

export const layout = DocsLayout;

export const getMetadata = () => ({
	title: 'Docs | @onUpdated',
	description: 'React to state changes with declarative callbacks.',
})

# @onUpdated

The `@onUpdated` decorator registers a callback method that executes automatically whenever a specific reactive property or field changes. It is the primary way to perform side effects in Radiant components.

## Usage

<CodeBlock>
```typescript
import { RadiantElement, customElement, reactiveProp, onUpdated } from '@ecopages/radiant';

@customElement('user-greeting')
export class UserGreeting extends RadiantElement {
	@reactiveProp({ type: String }) declare name: string;
	
	@onUpdated('name')
	updateGreeting() {
		// Receives no arguments; access the new value via this.name
		this.textContent = `Hello, ${this.name}!`;
	}
}
```
</CodeBlock>

## Parameters

| Parameter | Type | Required | Description |
| :-------- | :--- | :------- | :---------- |
| `propertyName` | `string` | Yes | Name of the property or field to watch. |

## Feature Highlight

### Watching Multiple Properties

A single method can watch multiple properties by applying the decorator multiple times.

<CodeBlock>
```typescript
@onUpdated('firstName')
@onUpdated('lastName')
updateFullName() {
	this.fullNameElement.textContent = `${this.firstName} ${this.lastName}`;
}
```
</CodeBlock>

### Derived State

Calculate and update internal state derived from public properties.

<CodeBlock>
```typescript
@reactiveProp({ type: Array }) declare items: CartItem[];
@reactiveField private total = 0;

@onUpdated('items')
calculateTotals() {
	this.total = this.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);
}
```
</CodeBlock>

### DOM Synchronization

Keep the DOM or external state in sync with component properties.

<CodeBlock>
```typescript
@onUpdated('theme')
applyTheme() {
	document.documentElement.setAttribute('data-theme', this.theme);
	localStorage.setItem('theme', this.theme);
}
```
</CodeBlock>

<div class="banner banner--caution">
  <p class="banner__title">CAUTION</p>
  <p>Avoid updating the same property you're watching, as this will trigger an infinite loop.</p>
</div>

## Learn More

- [@reactiveProp](/docs/decorators/reactive-prop) - Define public reactive properties.
- [@reactiveField](/docs/decorators/reactive-field) - Define internal reactive fields.
- [@debounce](/docs/decorators/debounce) - Debounce frequent updates.